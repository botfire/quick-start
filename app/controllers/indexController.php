<?php
namespace app\controllers;
use botfire\botfire\bot;


class indexController
{

  /*
  |======================
  |     ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª Ø´Ù…Ø§
  |======================
  | ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯
   */
  public $token = 'Replace-with-your-robot-token' ;

  /*
  |====================================
  |      Ù†Ø­ÙˆÙ‡ Ø±Ø§Ù‡ Ø§Ù†Ø¯Ø§Ø²ÛŒ Ø±Ø¨Ø§Øª
  |====================================
  | Ù¾Ø³ Ø§Ø² Ø§ÛŒÙ† Ú©Ù‡ ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯ÛŒØ¯
  | Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ø§ Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Ø®ÙˆØ¯ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯
  | Ø³Ù¾Ø³ Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ù†Ø§Ù… Ø¯Ø§Ù…ÛŒÙ† Ø®ÙˆØ¯ Ø¢Ø¯Ø±Ø³ Ø²ÛŒØ± Ø±Ø§ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø®ÙˆØ¯ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯
  |
  | URL = https://example.com/webhook/set
   */


  /**
   * Ø¢Ø¯Ø±Ø³ Ø³Ø±ÙˆØ± Ù…Ø§ Ø±Ø§ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ù…Ø¹Ø±ÙÛŒ Ù…ÛŒÚ©Ù†Ø¯
   * Ù¾Ø³ Ø§Ø² Ø¢Ù† ØªÙ„Ú¯Ø±Ø§Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ø§ Ø±Ø§ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒ Ú©Ù†Ø¯
   * @return json
   */
  public function setwebhook()
  {
    bot::token($this->token);
    return bot::webhook()->url( url('run') )->set();
  }


  /**
   * Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¯Ø± Ø±Ø¨Ø§Øª Ø´Ù…Ø§ Ø¹Ù…Ù„ÛŒØ§ØªÛŒ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒØ¯Ù‡Ø¯
   * Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙˆØ³Ø· Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø¯Ø±ÛŒØ§ÙØª Ùˆ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÛŒ Ø´ÙˆØ¯
   * Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ø§ Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø±ÙˆØª Ù‡Ø§ Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù‡ Ù…ÛŒ Ø´ÙˆØ¯
   */
  public function run()
  {

    bot::token($this->token);
    bot::autoInput();

    File::source('routes',['bot.php']);

    $this->firstMessage();
  }

  public function firstMessage(){
    // Ø§ÛŒØ¬Ø§Ø¯ Ú©ÛŒØ¨ÙˆØ±Ø¯ ÛŒØ§ Ù‡Ù…Ø§Ù† Ù„ÛŒÙ†Ú© Ø´ÛŒØ´Ù‡ Ø§ÛŒ
    $k = bot::keyboard();
    $k->btnUrl('Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø¨Ø§Øª ÙØ§ÛŒØ±','https://github.com/botfire/botfire')->row();
    $k->btnUrl('Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù†Ø§Ù„ ÛŒÙˆØªÛŒÙˆØ¨','https://www.youtube.com/channel/UCN0h9VCzj7qZjMZVhZKF8wg')->row();
    $k->btn('ğŸ”° Show Alert','alert')->row();
    $k->btn('ğŸ”° Send Message','message')->row();

    // Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… ØªØ³Øª Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ú©ÛŒØ¨ÙˆØ±Ø¯
    bot::this()->message("Hello World \n Ø±Ø¨Ø§Øª Ø´Ù…Ø§ Ø±Ø§Ù‡ Ø§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯ âœ…")->keyboard($k)->send();

  }

}
